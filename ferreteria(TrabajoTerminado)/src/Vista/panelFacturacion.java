/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package Vista;

import Controller.FacturacionController;
import Controller.VentaController;
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridBagLayout;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Map;
import javax.swing.BoxLayout;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.border.LineBorder;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;

/**
 *
 * @author enriq
 */
public class panelFacturacion extends javax.swing.JFrame {

    /**
     * Creates new form panelArticulos
     */
    VentaController ventaController=new VentaController();
    FacturacionController facturacionController=new FacturacionController();
    Map<String, Object>[] tabla;
    public panelFacturacion() {
        initComponents();
        iniComplementLayout();
        iniSize();
        iniLocation();
        iniDise√±os();
        iniTablaVentas();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        paneContenidoFacturacion = new javax.swing.JPanel();
        paneCrudFacturacion = new javax.swing.JPanel();
        paneTituloFacturacion = new javax.swing.JPanel();
        jLabel12 = new javax.swing.JLabel();
        lblTituloIconArticulos = new javax.swing.JLabel();
        paneContenedor = new javax.swing.JPanel();
        paneOpcionesFacturacion = new javax.swing.JPanel();
        paneFecha = new javax.swing.JPanel();
        lblFecha = new javax.swing.JLabel();
        dateFecha = new com.toedter.calendar.JDateChooser();
        paneBotones = new javax.swing.JPanel();
        paneBuscar = new javax.swing.JPanel();
        txtBusqueda = new javax.swing.JTextField();
        btnBuscar = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        btnImprimirFactura = new javax.swing.JPanel();
        lblimprimir = new javax.swing.JLabel();
        btnBuscarFecha = new javax.swing.JPanel();
        lblBuscar = new javax.swing.JLabel();
        paneTablaFacturacion = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblVenta = new javax.swing.JTable();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        paneContenidoFacturacion.setBackground(new java.awt.Color(229, 238, 255));

        paneCrudFacturacion.setBackground(new java.awt.Color(255, 255, 255));
        paneCrudFacturacion.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(72, 84, 247), 4));

        paneTituloFacturacion.setBackground(new java.awt.Color(72, 84, 247));

        jLabel12.setBackground(new java.awt.Color(255, 255, 255));
        jLabel12.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        jLabel12.setForeground(new java.awt.Color(255, 255, 255));
        jLabel12.setText("Facturacion");

        lblTituloIconArticulos.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/Factura.png"))); // NOI18N

        javax.swing.GroupLayout paneTituloFacturacionLayout = new javax.swing.GroupLayout(paneTituloFacturacion);
        paneTituloFacturacion.setLayout(paneTituloFacturacionLayout);
        paneTituloFacturacionLayout.setHorizontalGroup(
            paneTituloFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneTituloFacturacionLayout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addComponent(lblTituloIconArticulos)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel12)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        paneTituloFacturacionLayout.setVerticalGroup(
            paneTituloFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneTituloFacturacionLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(paneTituloFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(lblTituloIconArticulos, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel12))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        paneContenedor.setBackground(new java.awt.Color(153, 153, 153));

        paneOpcionesFacturacion.setBackground(new java.awt.Color(255, 255, 255));

        paneFecha.setOpaque(false);

        lblFecha.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        lblFecha.setText("Fecha");

        dateFecha.setDateFormatString("yyyy-MM-dd");
        dateFecha.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N

        javax.swing.GroupLayout paneFechaLayout = new javax.swing.GroupLayout(paneFecha);
        paneFecha.setLayout(paneFechaLayout);
        paneFechaLayout.setHorizontalGroup(
            paneFechaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneFechaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(paneFechaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblFecha)
                    .addComponent(dateFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(35, Short.MAX_VALUE))
        );
        paneFechaLayout.setVerticalGroup(
            paneFechaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, paneFechaLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(lblFecha)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(dateFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(35, 35, 35))
        );

        java.util.Date fechaActual2 = new java.util.Date();

        dateFecha.setMaxSelectableDate(fechaActual2);

        dateFecha.getComponent(1).setEnabled(false);

        paneBotones.setOpaque(false);

        paneBuscar.setBackground(new java.awt.Color(72, 84, 247));
        paneBuscar.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(72, 84, 247), 3));

        txtBusqueda.setFont(new java.awt.Font("Segoe UI", 0, 16)); // NOI18N

        btnBuscar.setBackground(new java.awt.Color(72, 84, 247));
        btnBuscar.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        btnBuscar.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            public void mouseMoved(java.awt.event.MouseEvent evt) {
                btnBuscarMouseMoved(evt);
            }
        });
        btnBuscar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnBuscarMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                btnBuscarMouseExited(evt);
            }
        });

        jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/lupa.png"))); // NOI18N

        javax.swing.GroupLayout btnBuscarLayout = new javax.swing.GroupLayout(btnBuscar);
        btnBuscar.setLayout(btnBuscarLayout);
        btnBuscarLayout.setHorizontalGroup(
            btnBuscarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(btnBuscarLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(jLabel3)
                .addContainerGap(20, Short.MAX_VALUE))
        );
        btnBuscarLayout.setVerticalGroup(
            btnBuscarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, btnBuscarLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel3)
                .addContainerGap())
        );

        javax.swing.GroupLayout paneBuscarLayout = new javax.swing.GroupLayout(paneBuscar);
        paneBuscar.setLayout(paneBuscarLayout);
        paneBuscarLayout.setHorizontalGroup(
            paneBuscarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneBuscarLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(txtBusqueda, javax.swing.GroupLayout.PREFERRED_SIZE, 158, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(12, 12, 12)
                .addComponent(btnBuscar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 6, Short.MAX_VALUE))
        );
        paneBuscarLayout.setVerticalGroup(
            paneBuscarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneBuscarLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(paneBuscarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(txtBusqueda, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnBuscar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(7, Short.MAX_VALUE))
        );

        btnImprimirFactura.setBackground(new java.awt.Color(27, 42, 244));
        btnImprimirFactura.setForeground(new java.awt.Color(255, 255, 255));
        btnImprimirFactura.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnImprimirFactura.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            public void mouseMoved(java.awt.event.MouseEvent evt) {
                btnImprimirFacturaMouseMoved(evt);
            }
        });
        btnImprimirFactura.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnImprimirFacturaMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                btnImprimirFacturaMouseExited(evt);
            }
        });

        lblimprimir.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        lblimprimir.setForeground(new java.awt.Color(255, 255, 255));
        lblimprimir.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/imprimir.png"))); // NOI18N
        lblimprimir.setText("Imprimir Factura");

        javax.swing.GroupLayout btnImprimirFacturaLayout = new javax.swing.GroupLayout(btnImprimirFactura);
        btnImprimirFactura.setLayout(btnImprimirFacturaLayout);
        btnImprimirFacturaLayout.setHorizontalGroup(
            btnImprimirFacturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, btnImprimirFacturaLayout.createSequentialGroup()
                .addContainerGap(41, Short.MAX_VALUE)
                .addComponent(lblimprimir)
                .addGap(27, 27, 27))
        );
        btnImprimirFacturaLayout.setVerticalGroup(
            btnImprimirFacturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(btnImprimirFacturaLayout.createSequentialGroup()
                .addGap(15, 15, 15)
                .addComponent(lblimprimir)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        btnBuscarFecha.setBackground(new java.awt.Color(135, 2, 128));
        btnBuscarFecha.setForeground(new java.awt.Color(255, 255, 255));
        btnBuscarFecha.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnBuscarFecha.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
            public void mouseMoved(java.awt.event.MouseEvent evt) {
                btnBuscarFechaMouseMoved(evt);
            }
        });
        btnBuscarFecha.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btnBuscarFechaMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                btnBuscarFechaMouseExited(evt);
            }
        });

        lblBuscar.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        lblBuscar.setForeground(new java.awt.Color(255, 255, 255));
        lblBuscar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/lupa.png"))); // NOI18N
        lblBuscar.setText("Buscar Fecha");
        lblBuscar.setVerticalAlignment(javax.swing.SwingConstants.TOP);

        javax.swing.GroupLayout btnBuscarFechaLayout = new javax.swing.GroupLayout(btnBuscarFecha);
        btnBuscarFecha.setLayout(btnBuscarFechaLayout);
        btnBuscarFechaLayout.setHorizontalGroup(
            btnBuscarFechaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, btnBuscarFechaLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(lblBuscar)
                .addContainerGap())
        );
        btnBuscarFechaLayout.setVerticalGroup(
            btnBuscarFechaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(btnBuscarFechaLayout.createSequentialGroup()
                .addGap(16, 16, 16)
                .addComponent(lblBuscar)
                .addContainerGap(20, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout paneBotonesLayout = new javax.swing.GroupLayout(paneBotones);
        paneBotones.setLayout(paneBotonesLayout);
        paneBotonesLayout.setHorizontalGroup(
            paneBotonesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, paneBotonesLayout.createSequentialGroup()
                .addContainerGap(105, Short.MAX_VALUE)
                .addComponent(btnBuscarFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(73, 73, 73)
                .addComponent(btnImprimirFactura, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(26, 26, 26)
                .addComponent(paneBuscar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );
        paneBotonesLayout.setVerticalGroup(
            paneBotonesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneBotonesLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(paneBotonesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(btnImprimirFactura, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(paneBuscar, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(paneBotonesLayout.createSequentialGroup()
                .addGap(19, 19, 19)
                .addComponent(btnBuscarFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(19, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout paneOpcionesFacturacionLayout = new javax.swing.GroupLayout(paneOpcionesFacturacion);
        paneOpcionesFacturacion.setLayout(paneOpcionesFacturacionLayout);
        paneOpcionesFacturacionLayout.setHorizontalGroup(
            paneOpcionesFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, paneOpcionesFacturacionLayout.createSequentialGroup()
                .addContainerGap(135, Short.MAX_VALUE)
                .addComponent(paneFecha, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(297, 297, 297)
                .addComponent(paneBotones, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(27, 27, 27))
        );
        paneOpcionesFacturacionLayout.setVerticalGroup(
            paneOpcionesFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneOpcionesFacturacionLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(paneOpcionesFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(paneFecha, javax.swing.GroupLayout.PREFERRED_SIZE, 65, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(paneBotones, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(21, Short.MAX_VALUE))
        );

        paneTablaFacturacion.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 255, 255), 10));

        tblVenta.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tblVenta.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblVentaMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(tblVenta);

        javax.swing.GroupLayout paneTablaFacturacionLayout = new javax.swing.GroupLayout(paneTablaFacturacion);
        paneTablaFacturacion.setLayout(paneTablaFacturacionLayout);
        paneTablaFacturacionLayout.setHorizontalGroup(
            paneTablaFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1)
        );
        paneTablaFacturacionLayout.setVerticalGroup(
            paneTablaFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 405, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout paneContenedorLayout = new javax.swing.GroupLayout(paneContenedor);
        paneContenedor.setLayout(paneContenedorLayout);
        paneContenedorLayout.setHorizontalGroup(
            paneContenedorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneContenedorLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(paneContenedorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(paneTablaFacturacion, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, paneContenedorLayout.createSequentialGroup()
                        .addComponent(paneOpcionesFacturacion, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGap(417, 417, 417)))
                .addContainerGap())
        );
        paneContenedorLayout.setVerticalGroup(
            paneContenedorLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneContenedorLayout.createSequentialGroup()
                .addComponent(paneOpcionesFacturacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(50, 50, 50)
                .addComponent(paneTablaFacturacion, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        javax.swing.GroupLayout paneCrudFacturacionLayout = new javax.swing.GroupLayout(paneCrudFacturacion);
        paneCrudFacturacion.setLayout(paneCrudFacturacionLayout);
        paneCrudFacturacionLayout.setHorizontalGroup(
            paneCrudFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(paneTituloFacturacion, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(paneCrudFacturacionLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(paneContenedor, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        paneCrudFacturacionLayout.setVerticalGroup(
            paneCrudFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, paneCrudFacturacionLayout.createSequentialGroup()
                .addComponent(paneTituloFacturacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(paneContenedor, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout paneContenidoFacturacionLayout = new javax.swing.GroupLayout(paneContenidoFacturacion);
        paneContenidoFacturacion.setLayout(paneContenidoFacturacionLayout);
        paneContenidoFacturacionLayout.setHorizontalGroup(
            paneContenidoFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneContenidoFacturacionLayout.createSequentialGroup()
                .addGap(38, 38, 38)
                .addComponent(paneCrudFacturacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        paneContenidoFacturacionLayout.setVerticalGroup(
            paneContenidoFacturacionLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paneContenidoFacturacionLayout.createSequentialGroup()
                .addGap(44, 44, 44)
                .addComponent(paneCrudFacturacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(932, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(paneContenidoFacturacion, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(paneContenidoFacturacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnImprimirFacturaMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnImprimirFacturaMouseExited
        // TODO add your handling code here:
        btnImprimirFactura.setBackground(new Color(27,42,244));
    }//GEN-LAST:event_btnImprimirFacturaMouseExited

    private void btnImprimirFacturaMouseMoved(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnImprimirFacturaMouseMoved
        // TODO add your handling code here:
        btnImprimirFactura.setBackground(new Color(72,84,247));
    }//GEN-LAST:event_btnImprimirFacturaMouseMoved

    private void btnBuscarMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnBuscarMouseExited
        // TODO add your handling code here:
        Color Micolor= new Color(72,84,247);
        btnBuscar.setBackground(Micolor);
        paneBuscar.setBorder(new LineBorder(Micolor,3));
    }//GEN-LAST:event_btnBuscarMouseExited

    private void btnBuscarMouseMoved(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnBuscarMouseMoved
        // TODO add your handling code here:
        Color Micolor= new Color(0,0,204);
        btnBuscar.setBackground(Micolor);
        paneBuscar.setBorder(new LineBorder(Micolor,3));
    }//GEN-LAST:event_btnBuscarMouseMoved

    private void btnBuscarFechaMouseMoved(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnBuscarFechaMouseMoved
        // TODO add your handling code here:
        btnBuscarFecha.setBackground(new Color(182,0,172));
    }//GEN-LAST:event_btnBuscarFechaMouseMoved

    private void btnBuscarFechaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnBuscarFechaMouseClicked
        // TODO add your handling code here:
        iniTablaVentas();
        Date fechaSeleccionada = dateFecha.getDate();

        // Formatear la fecha como una cadena en el formato deseado
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        String fechaFormateada = dateFormat.format(fechaSeleccionada);
        String elementoBusqueda = fechaFormateada; // Fecha que se desea buscar
        if(!elementoBusqueda.equals("")){
            DefaultTableModel model = (DefaultTableModel) tblVenta.getModel();
            int rowCount = model.getRowCount();
            int columnCount = model.getColumnCount();

            List<Integer> filasCoincidentes = new ArrayList<>();

            for (int row = 0; row < rowCount; row++) {
                for (int column = 0; column < columnCount; column++) {
                    Object cellValue = model.getValueAt(row, column);
                    String cellString = String.valueOf(cellValue);

                    if (cellString.equals(elementoBusqueda)) {
                        filasCoincidentes.add(row);
                        // Puedes realizar alguna acci√≥n adicional, como resaltar la fila
                    }
                }
            }
            DefaultTableModel modelVenta = new DefaultTableModel() {
                @Override
                public boolean isCellEditable(int row, int column) {
                    return false;
                }
            };
            modelVenta.addColumn("ID");
            modelVenta.addColumn("Usuario");
            modelVenta.addColumn("Nombre Cliente");
            modelVenta.addColumn("DNI Cliente");
            modelVenta.addColumn("Metodo de Pago");
            modelVenta.addColumn("Fecha de Venta");
            modelVenta.addColumn("Total");

            for (Integer filaCoincidente : filasCoincidentes) {
                Object[] rowData = new Object[7];
                rowData[0] = tblVenta.getValueAt(filaCoincidente, 0); 
                rowData[1] = tblVenta.getValueAt(filaCoincidente, 1);  
                rowData[2] = tblVenta.getValueAt(filaCoincidente, 2); 
                rowData[3] = tblVenta.getValueAt(filaCoincidente, 3);  
                rowData[4] = tblVenta.getValueAt(filaCoincidente, 4);  
                rowData[5] = tblVenta.getValueAt(filaCoincidente, 5);  
                rowData[6] = tblVenta.getValueAt(filaCoincidente, 6);  
                
                modelVenta.addRow(rowData);
            }
      
            tblVenta.setModel(modelVenta);
            tblVenta.repaint();
        }else{
            iniTablaVentas();
        }

    }//GEN-LAST:event_btnBuscarFechaMouseClicked

    private void btnBuscarFechaMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnBuscarFechaMouseExited
        // TODO add your handling code here:
        btnBuscarFecha.setBackground(new Color(135,2,128));
    }//GEN-LAST:event_btnBuscarFechaMouseExited

    private void tblVentaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblVentaMouseClicked
        // TODO add your handling code here:
        int filaSeleccionada = tblVenta.getSelectedRow();
        facturacionController.guardarDatosSeleccionados(filaSeleccionada) ;
        
    }//GEN-LAST:event_tblVentaMouseClicked

    private void btnImprimirFacturaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnImprimirFacturaMouseClicked
        // TODO add your handling code here:

        // Verifica si hay una fila seleccionada
        int selectedRow = tblVenta.getSelectedRow();
        
        if (selectedRow == -1) {
            ModalError modal = new ModalError("No hay fila seleccionada");
            JDialog dialogo = new JDialog(modal, "Mi di√°logo", true); // true indica que es modal
            dialogo.setContentPane(modal.getContentPane()); // agregamos el contenido del JFrame al JDialog
            dialogo.setSize(new Dimension(400, 200)); // ajustamos el tama√±o del JDialog al del JFrame
            dialogo.setUndecorated(true);
            dialogo.setLocationRelativeTo(null); // centra el dialogo en la pantalla
            dialogo.setVisible(true);
        }
        else{
            
            facturacionController.generarFacturaCompra();
            ModalNotificar modal = new ModalNotificar("Impresion Exitosa");
            JDialog dialogo = new JDialog(modal, "Mi di√°logo", true); // true indica que es modal
            dialogo.setContentPane(modal.getContentPane()); // agregamos el contenido del JFrame al JDialog
            dialogo.setSize(new Dimension(400, 200)); // ajustamos el tama√±o del JDialog al del JFrame
            dialogo.setUndecorated(true);
            dialogo.setLocationRelativeTo(null); // centra el dialogo en la pantalla
            dialogo.setVisible(true);
            
        }
    }//GEN-LAST:event_btnImprimirFacturaMouseClicked

    private void btnBuscarMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnBuscarMouseClicked
        // TODO add your handling code here:
        iniTablaVentas();
        
        String elementoBusqueda = txtBusqueda.getText(); // Elemento que se desea buscar
        if(!elementoBusqueda.equals("")){
            DefaultTableModel model = (DefaultTableModel) tblVenta.getModel();
            int rowCount = model.getRowCount();
            int columnCount = model.getColumnCount();

            List<Integer> filasCoincidentes = new ArrayList<>();

            for (int row = 0; row < rowCount; row++) {
                for (int column = 0; column < columnCount; column++) {
                    Object cellValue = model.getValueAt(row, column);
                    String cellString = String.valueOf(cellValue);

                    if (cellString.equals(elementoBusqueda)) {
                        filasCoincidentes.add(row);
                        // Puedes realizar alguna acci√≥n adicional, como resaltar la fila
                    }
                }
            }
            DefaultTableModel modelVenta = new DefaultTableModel() {
                @Override
                public boolean isCellEditable(int row, int column) {
                    return false;
                }
            };
            modelVenta.addColumn("ID");
            modelVenta.addColumn("Usuario");
            modelVenta.addColumn("Nombre Cliente");
            modelVenta.addColumn("DNI Cliente");
            modelVenta.addColumn("Metodo de Pago");
            modelVenta.addColumn("Fecha de Venta");
            modelVenta.addColumn("Total");

            for (Integer filaCoincidente : filasCoincidentes) {
                Object[] rowData = new Object[7];
                rowData[0] = tblVenta.getValueAt(filaCoincidente, 0); 
                rowData[1] = tblVenta.getValueAt(filaCoincidente, 1);  
                rowData[2] = tblVenta.getValueAt(filaCoincidente, 2); 
                rowData[3] = tblVenta.getValueAt(filaCoincidente, 3);  
                rowData[4] = tblVenta.getValueAt(filaCoincidente, 4);  
                rowData[5] = tblVenta.getValueAt(filaCoincidente, 5);  
                rowData[6] = tblVenta.getValueAt(filaCoincidente, 6);  
                
                modelVenta.addRow(rowData);
            }
      
            tblVenta.setModel(modelVenta);
            tblVenta.repaint();
        }else{
            iniTablaVentas();
        }
    }//GEN-LAST:event_btnBuscarMouseClicked

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(panelFacturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(panelFacturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(panelFacturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(panelFacturacion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new panelFacturacion().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel btnBuscar;
    private javax.swing.JPanel btnBuscarFecha;
    private javax.swing.JPanel btnImprimirFactura;
    private com.toedter.calendar.JDateChooser dateFecha;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JLabel lblBuscar;
    private javax.swing.JLabel lblFecha;
    private javax.swing.JLabel lblTituloIconArticulos;
    private javax.swing.JLabel lblimprimir;
    private javax.swing.JPanel paneBotones;
    private javax.swing.JPanel paneBuscar;
    private javax.swing.JPanel paneContenedor;
    private javax.swing.JPanel paneContenidoFacturacion;
    private javax.swing.JPanel paneCrudFacturacion;
    private javax.swing.JPanel paneFecha;
    private javax.swing.JPanel paneOpcionesFacturacion;
    private javax.swing.JPanel paneTablaFacturacion;
    private javax.swing.JPanel paneTituloFacturacion;
    private javax.swing.JTable tblVenta;
    private javax.swing.JTextField txtBusqueda;
    // End of variables declaration//GEN-END:variables

    private void iniComplementLayout() {
        getContentPane().setLayout(new CardLayout());
        
        getContentPane().add(paneContenidoFacturacion);
        //layaout para el contenido
        FlowLayout flowlayoutContenido = new FlowLayout(FlowLayout.CENTER,10,70);
        paneContenidoFacturacion.setLayout(flowlayoutContenido);
            FlowLayout flowlayoutTituloArticulos = new FlowLayout(FlowLayout.LEFT,10,10);
            paneCrudFacturacion.setLayout(new BorderLayout());
                paneTituloFacturacion.setLayout(flowlayoutTituloArticulos);
                paneCrudFacturacion.add(paneTituloFacturacion, java.awt.BorderLayout.PAGE_START);
                paneCrudFacturacion.add(paneContenedor, java.awt.BorderLayout.CENTER);
                    paneContenedor.setLayout(new BorderLayout());
                    paneContenedor.add(paneOpcionesFacturacion, java.awt.BorderLayout.PAGE_START);
                    paneContenedor.add(paneTablaFacturacion, java.awt.BorderLayout.CENTER);
                    
                FlowLayout flowlayoutOpArticulos= new FlowLayout(FlowLayout.RIGHT,25,30);
                paneOpcionesFacturacion.setLayout(flowlayoutOpArticulos);
                    paneFecha.setLayout(new BoxLayout(paneFecha, BoxLayout.Y_AXIS));
                        dateFecha.setAlignmentX(LEFT_ALIGNMENT);
                        lblFecha.setAlignmentX(LEFT_ALIGNMENT);
                    paneFecha.add(lblFecha);     
                    paneFecha.add(dateFecha);
                    btnBuscarFecha.setLayout(new GridBagLayout());
                    paneBuscar.setLayout(new BoxLayout(paneBuscar, BoxLayout.X_AXIS));
                    btnImprimirFactura.setLayout(new GridBagLayout());
                    paneBotones.setLayout(null);
                    
                    paneBotones.add(btnBuscarFecha);
                    paneBotones.add(btnImprimirFactura);
                    paneBotones.add(paneBuscar);
                paneOpcionesFacturacion.add(paneFecha);
                paneOpcionesFacturacion.add(paneBotones);
      
        
    }

    private void iniSize() {
         //tama√±o de ventana
        this.setBounds(0,0,1400, 900);
        
        //tama√±o del panel de contenido
        paneContenidoFacturacion.setPreferredSize(new Dimension( 1, 1));    
            paneCrudFacturacion.setPreferredSize(new Dimension( 1000, 650));    
                paneOpcionesFacturacion.setPreferredSize(new Dimension( 1000, 100));  
                    paneFecha.setPreferredSize(new Dimension( 160,60 ));
                    
                    paneBotones.setPreferredSize(new Dimension( 650, 60));
                    btnBuscarFecha.setSize(new Dimension( 160, 45));
                    paneBuscar.setSize(new Dimension( 240, 45));
                    btnBuscar.setSize(new Dimension( 60, 40));
                    btnImprimirFactura.setSize(new Dimension( 200, 45));
                    
    }           
    private void iniLocation(){
        //centrando ventana
        this.setLocationRelativeTo(null);
        btnBuscarFecha.setLocation(0, 15);
        btnImprimirFactura.setLocation(185, 15);
        paneBuscar.setLocation(410, 15);
    }

    private void iniDise√±os() {
        lblimprimir.setHorizontalAlignment(SwingConstants.CENTER);
        lblimprimir.setVerticalAlignment(SwingConstants.CENTER);
        lblBuscar.setHorizontalAlignment(SwingConstants.CENTER);
        lblBuscar.setVerticalAlignment(SwingConstants.CENTER);
    }
    public JPanel obtenerPanel(){
        return this.paneContenidoFacturacion;
    }

    public Object getValueAt(int fila, int columna) {
        return tblVenta.getValueAt(fila, columna);
    }
    private void iniTablaVentas(){
        tabla = ventaController.ObtenerVentas();
        DefaultTableModel model = new DefaultTableModel() {
            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            }
        };
        model.addColumn("ID");
        model.addColumn("Usuario");
        model.addColumn("Nombre Cliente");
        model.addColumn("DNI Cliente");
        model.addColumn("Metodo de Pago");
        model.addColumn("Fecha de Venta");
        model.addColumn("Total");
        
        for(Map<String, Object> res : tabla){
            Map<String, Object> usuUsuario=ventaController.ObtenerNombreUsuario((Integer)res.get("idusuario"));
            model.addRow(new Object[]{res.get("id"),usuUsuario.get("usuUsuario"), res.get("NomCliente"), res.get("DNICliente"),res.get("MetodoPago"), res.get("fecha"),res.get("total")});        
        } 
        
        tblVenta.setModel(model);
        tblVenta.repaint();
    }
}
